name: Sync Fork

on:
  workflow_dispatch:
  #schedule:
  #- cron: "55 8-18 * * 1-5"

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:  
      - uses: actions/checkout@v3
        with:
          repository: 'maxafu/cryptum-api-connector'
          ref: 'master'
          token: '${{ github.PAT }}'
          path: 'maxafu'
          
      - uses: actions/checkout@v3
        with:
          repository: 'blockforce-official/cryptum-api-connector'
          ref: 'master'
          path: 'blockforce'
          
      - name: git-bash
        # You may pin to the exact commit or the version.
        # uses: pkg-src/github-action-git-bash@d7e3f57b86fcf5d919a5ba685d459583735b7611
        uses: pkg-src/github-action-git-bash@v1.1    
          cd '$GITHUB_WORKSPACE/maxafu/cryptum-api-connector'
          rm -R !(.git)
          ls
          rsync -av --progress $GITHUB_WORKSPACE/blockforce-official/cryptum-api-connector /$GITHUB_WORKSPACE/maxafu/cryptum-api-connector --exclude '.git'
          
        
